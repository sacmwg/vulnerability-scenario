The strongswan.org XMPP-Grid Service
====================================


 XMPP-Grid Server
-----------------

The **strongswan.org** domain is running the
[Openfire 4.1.6](https://www.igniterealtime.org/projects/openfire/) XMPP server
**xmpp.strongswan.org** (46.126.238.39, listening on TCP port 5222). The
[XMPP-Grid](https://tools.ietf.org/html/draft-ietf-mile-xmpp-grid) service is
based on the XMPP **Publish-Subscribe** plugin
[XEP-0060](https://xmpp.org/extensions/xep-0060.html). **xmpp.strongswan.org**
authenticates itself with a server certificate issued by the
[strongSwan Root CA](./strongswanCaCert.pem).


XMPP-Grid Clients
-----------------

Any XMPP client supporting the XMPP
[Publish-Subscribe](https://xmpp.org/extensions/xep-0060.html)
protocol can be used to connect to the strongSwan XMPP server.
The [strongTNC](https://github.com/strongswan/strongTNC) Endpoint Collector
e.g. uses the [SleekXMPP](https://github.com/fritzy/SleekXMPP) Python client.

The SleekXMPP Pubsub example client [pubsub_client.py](./pubsub_client.py)
can be used to discover existing topics (nodes)

    python pubsub_client.py -j <user>@strongswan.org pubsub.strongswan.org nodes

    - ('pubsub.strongswan.org', 'sacm/endpoints', '')
    - ('pubsub.strongswan.org', 'sacm/vulnerabilities', '')
    - ('pubsub.strongswan.org', 'sacm/swidtags', '')
    - ('pubsub.strongswan.org', 'sacm/events', '')
    - ('pubsub.strongswan.org', 'sacm', '')

The last cached item of the sacm/swidtags node is

    python pubsub_client.py -j <user>@strongswan.org pubsub.strongswan.org nodes sacm/swidtags

     - ('pubsub.strongswan.org', None, 'strongswan.org__Ubuntu_16.04-x86_64-wpasupplicant-2.4-0ubuntu6.2')

This item was published using the Pubsub example publisher [pubsub_publish.py](./pubsub_publish.py)

     python pubsub_publish.py -j tnc@strongswan.org pubsub.strongswan.org sacm/swidtags \
            strongswan.org__Ubuntu_16.04-x86_64-wpasupplicant-2.4-0ubuntu6.2 \
           "<SoftwareIdentity name=\"wpasupplicant\" tagId=\"Ubuntu_16.04-x86_64-wpasupplicant-2.4-0ubuntu6.2\" version=\"2.4-0ubuntu6.2\" versionScheme=\"alphanumeric\" xmlns=\"http://standards.iso.org/iso/19770/-2/2015/schema.xsd\" xmlns:n8060=\"http://csrc.nist.gov/schema/swid/2015-extensions/swid-2015-extensions-1.0.xsd\"><Entity name=\"strongSwan Project\" regid=\"strongswan.org\" role=\"tagCreator\" /><Meta product=\"Ubuntu 16.04 x86_64\" /></SoftwareIdentity>"

The user can retrieve the cached item with the command

    python pubsub_client.py -j <user>@strongswan.org pubsub.strongswan.org get sacm/swidtags strongswan.org__Ubuntu_16.04-x86_64-wpasupplicant-2.4-0ubuntu6.2

    Retrieved item strongswan.org__Ubuntu_16.04-x86_64-wpasupplicant-2.4-0ubuntu6.2:
    <SoftwareIdentity xmlns="http://standards.iso.org/iso/19770/-2/2015/schema.xsd" tagId="Ubuntu_16.04-x86_64-wpasupplicant-2.4-0ubuntu6.2" version="2.4-0ubuntu6.2" versionScheme="alphanumeric" name="wpasupplicant"><Entity regid="strongswan.org" role="tagCreator" name="strongSwan Project" /><Meta product="Ubuntu 16.04 x86_64" /></SoftwareIdentity>

The user can subscribe to a topic (node) with the command

    python pubsub_client.py -j <user>@strongswan.org pubsub.strongswan.org subscribe sacm/events

The SleekXMPP Pubsub events example client [pubsub_events.py](./pubsub_events.py) can be
used to monitor Publish-Subscribe events:

    python pubsub_events.py -j <user>@strongswan.org pubsub.strongswan.org


XMPP-Grid strongTNC Publisher
-----------------------------

The [strongTNC](https://github.com/strongswan/strongTNC) Endpoint Collector
currently publishes all newly imported SWID tags on the ``sacm/swidtags`` node.
During the IETF 100 Hackathon it is planned to publish all SWIMA events
collected from the associated endpoints on the ``sacm/events`` node.


XMPP-Grid Topics
----------------

The following topics (nodes) have been defined:

- sacm
- sacm/endpoints
- sacm/events
- sacm/swidtags
- sacm/vulnerabilities


XMPP Users
----------

Currently XMPP user accounts of the form <user>@strongswan.org for the following
IETF 100 Hackathon participants have been created:

- adam.montville
- chris.inacio
- danny.haynes
- david.waltermire
- henk.birkholz
- ncamwing
- stephen.banghart
- william.munyan

The password for all accounts is "ietf100hackathon". All users have been subscribed
to the ``sacm/swidtags`` topic.
